<!DOCTYPE html>
<html xmlns:shiro="http://www.pollix.at/thymeleaf/shiro" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>两个人商城</title>
    <script src="/webjars/jquery/jquery.min.js"></script>
    <script src="/webjars/bootstrap/js/bootstrap.min.js"></script>
    <link href="/webjars/bootstrap/css/bootstrap.min.css" rel="stylesheet"/>
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12" style="text-align: center"><h1>这是支付界面</h1></div>
        <div class="row">
            <div shiro:user="" class="col-sm-6" style="text-align: center">
                <h4>看到这个说明你是个有身份的人</h4>
                <div>这是你的信息:<span shiro:principal=""></span></div>
                <div shiro:hasRole="seller"><span>你不仅是个有身份的人,还是个开了个店的人</span></div>
                <div shiro:hasRole="buyer"><span>你不仅是个有身份的人,还是个......的人</span></div>
            </div>
            <div shiro:guest="" class="col-sm-6" style="text-align: center"><h4>看到这个说明你是个游客</h4></div>
            <div id="show" class="col-sm-6" style="text-align: center">
                <a href="toIndex">前往主页</a><br/>
                <a shiro:guest="" href="toRegistration">注册界面</a><br/>
                <a shiro:user="" href="toCart">购物车</a><br/>
                <a shiro:user="" href="toCollect">我的收藏</a><br/>
                <a shiro:user="" href="toUser">个人中心</a><br/>
                <a shiro:hasRole="seller" href="toMyShop">我的店铺</a><br/>
                <a href="toSeller">卖家中心</a><br/>
                <a shiro:user="" href="logout">注销</a>
            </div>
        </div>
        <div id="show1" class="col-sm-6 col-sm-offset-3">
            <div class="row">
                <form class="form-horizontal">
                    <input type="hidden" th:value="${shopId}" name="shopId" id="shopId"/>
                    <div class="form-group">
                        <label for="money" class="col-sm-2 control-label">充值金额:</label>
                        <div class="col-sm-10">
                            <input type="number" min="0" max="10000000" class="form-control" name="money" id="money"
                                   placeholder="money"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="rechargeType" class="col-sm-2 control-label">支付方式:</label>
                        <div class="col-sm-10">
                            <select class="form-control" name="rechargeType" id="rechargeType">
                                <option value="1">支付宝</option>
                                <option value="2">微信</option>
                                <option value="3">其他</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                            <button type="button" class="btn btn-default" onclick="rechargeMoney()">充值</button>
                        </div>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>
</body>

<script type="text/javascript">
    function rechargeMoney() {
        var rechargeType = $("#rechargeType").val();
        // $.ajax({})
        //根据支付类型进行不同方式的充值
        $.ajax({
            url: "recharge.do",
            type: "put",
            data: {
                "money": $("#money").val(),
                "shopId": $("#shopId").val()
            },
            success: function (data) {
                switch (data) {
                    case -1 : {
                        alert("请登陆,将前往登陆界面");
                        window.location.href = "toLogin";
                    }
                        break;
                    case 0:
                        alert("充值失败");
                        break;
                    case 1:
                        alert("充值成功");
                        break;
                    default :
                        alert("其他错误");
                        break;
                }
            }
        })
    }
</script>
</html>